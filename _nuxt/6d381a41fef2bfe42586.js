(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{265:function(t,e,n){var content=n(280);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(128).default)("1e2d3586",content,!0,{sourceMap:!1})},266:function(t,e,n){var content=n(284);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(128).default)("2e34fb64",content,!0,{sourceMap:!1})},276:function(t){t.exports=JSON.parse('{"resources":[{"title":"Support local nightlife","description":"Enjoy live sets from Berlin\'s top DJs, and support them with your donations.","links":[{"title":"unitedwestream.berlin","lang":["en","de"]},{"title":"startnext.com","lang":["de"]},{"title":"betterplace.me","lang":["de"]}]},{"title":"Support local artists","description":"Support for artists from the culture and creative industries.","links":[{"title":"Berlinalive.de","lang":["en","de"]},{"title":"creative-city-berlin.de","lang":["de"]},{"title":"sofaconcerts.org","lang":["de"]},{"title":"openpetition.com","lang":["de"]}]},{"title":"Support local businesses","description":"Vouchers for any small businesses (restaurants, cafes, bars, clubs, bookstores, fashion, interior, other)","links":[{"title":"Pleasedontclose.com","lang":["en","de"]},{"title":"Helfen.berlin","lang":["de"]},{"title":"Supportyourlocal.online","lang":["de"]}]}],"stories":[{"slug":"bastian-thiery","title":"Bastian Thiery","subtitle":"Streaming live shows from home","caption":"photographer","image":"https://placekitten.com/500/700","vertical":true},{"slug":"luz","title":"Luz","subtitle":"Streaming live shows from home","caption":"DJ & promoter","image":"https://placekitten.com/700/500"},{"slug":"anatomie-fleur","title":"Anatomie Fleur","subtitle":"Streaming live shows from home","caption":"DJ & promoter","image":"https://placekitten.com/500/700?image=12","vertical":true},{"slug":"bar-in-a-jar","title":"Bar in a Jar","subtitle":"Delivering cocktails by bike","caption":"cocktail bar","image":"https://placekitten.com/500/700?image=13","vertical":true},{"slug":"anna-lena-krause","title":"Anna-Lena Krause","subtitle":"Streaming live shows from home","caption":"photographer","image":"https://placekitten.com/500/700?image=15","vertical":true}],"resourceForm":{"title":"Add another resource","description":"Are we missing anything? Let us know.","cta":{"title":"Submit a resource","url":"#"}},"makerForm":{"title":"Are you a maker in Berlin?","description":"Don\'t be shy. We would love to hear from you.","cta":{"title":"Submit your story","url":"#"}}}')},279:function(t,e,n){"use strict";var r=n(265);n.n(r).a},280:function(t,e,n){(e=n(127)(!1)).push([t.i,".city-panel[data-v-db8e6ae4]{z-index:var(--i)}",""]),t.exports=e},281:function(t,e){t.exports={functional:!0,render(t,e){const{_c:n,_v:r,data:data,children:l=[]}=e,{class:o,staticClass:c,style:style,staticStyle:h,attrs:d={},...f}=data;return n("svg",{class:[o,c],style:[style,h],attrs:Object.assign({viewBox:"0 0 1300 218",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),...f},l.concat([n("path",{attrs:{d:"M169.58 189.104L114.136 3.516H48.4v3.652c16.6 0 37.516 3.652 32.204 22.244l-48.14 159.692c-5.312 18.592-21.58 22.244-31.54 22.244V215h68.724v-3.652c-13.28 0-28.884-3.652-23.572-22.244l12.284-40.836h79.348l12.284 40.836c5.312 18.592-10.956 22.244-24.236 22.244V215h75.032v-3.652c-9.96 0-25.896-3.652-31.208-22.244zm-107.568-53.12L98.2 15.8l35.856 120.184H62.012zM351.7 10.82l-.996-9.628c-5.312 1.992-13.612 2.324-24.236 2.324H199.976c-10.624 0-18.924-.332-24.236-2.324l-.996 9.628-3.984 34.196 3.652.332c1.328-12.284 7.304-29.548 26.56-29.548h52.456v172.308c0 19.256-13.944 23.24-23.904 23.24V215h67.064v-3.652c-9.96 0-23.572-3.984-23.572-23.24V15.8h52.456c19.256 0 25.232 17.596 26.56 30.212l3.652-.664L351.7 10.82zm280.646-3.652V3.516h-67.064v3.652c9.96 0 23.904 3.984 23.904 23.24V90.5H483.942V30.408c0-19.256 13.612-23.24 23.572-23.24V3.516H440.45v3.652c9.96 0 23.904 3.984 23.904 23.24v157.7c0 19.256-13.944 23.24-23.904 23.24V215h67.064v-3.652c-9.96 0-23.572-3.984-23.572-23.24v-85.324h105.244v85.324c0 19.256-13.944 23.24-23.904 23.24V215h67.064v-3.652c-9.96 0-23.572-3.984-23.572-23.24v-157.7c0-19.256 13.612-23.24 23.572-23.24zM741.211.196c-63.08 0-93.624 45.816-93.624 106.904 0 61.088 30.544 110.224 93.624 110.224s93.624-49.136 93.624-110.224S804.291.196 741.211.196zm0 207.832c-48.14 0-72.708-47.144-72.708-100.928 0-53.452 24.568-97.608 72.708-97.608s72.708 44.156 72.708 97.608c0 53.784-24.568 100.928-72.708 100.928zm346.159-19.92l-22.58-157.7c-2.99-19.256 9.96-23.24 19.92-23.24V3.516h-49.8L986.105 166.86c-3.652 12.284-4.98 23.24-5.312 31.872L922.361 3.516h-50.464v3.652c9.96 0 22.908 3.984 19.92 23.24l-22.576 157.7c-2.988 19.256-17.928 23.24-27.888 23.24V215h67.064v-3.652c-12.616 0-28.552-3.984-25.564-23.24l24.568-170.98L966.517 215h19.588l58.105-197.872 24.56 170.98c2.99 19.256-12.28 23.24-23.9 23.24V215h70.38v-3.652c-9.96 0-24.9-3.984-27.88-23.24zm208.65-14.608c-2.99 11.952-11.62 29.216-30.88 29.216h-89.64v-95.948h71.71c19.26 0 23.24 10.624 23.24 17.928h3.65V77.22h-3.65c0 7.304-3.98 17.928-23.24 17.928h-71.71V15.8h91.63c17.6 0 22.58 15.936 23.57 27.556l3.32-.332-2.65-31.872-.67-7.636h-158.69v3.652c9.96 0 23.9 3.984 23.9 23.24v157.7c0 19.256-13.94 23.24-23.9 23.24V215h156.7l1.99-7.636 8.97-32.868-3.65-.996z",fill:"inherit"}})]))}}},282:function(t,e){t.exports={functional:!0,render(t,e){const{_c:n,_v:r,data:data,children:l=[]}=e,{class:o,staticClass:c,style:style,staticStyle:h,attrs:d={},...f}=data;return n("svg",{class:[o,c],style:[style,h],attrs:Object.assign({fill:"none",height:"34",width:"34",xmlns:"http://www.w3.org/2000/svg"},d),...f},l.concat([n("circle",{attrs:{cx:"17",cy:"17",r:"16.5",stroke:"#000"}}),n("path",{attrs:{d:"M22.04 14.8c-2.12 2.32-4.08 5.36-5.04 8.92l.72-9.16V8.72h-2.24v5.84l.72 9.16c-.96-3.56-2.92-6.6-5.04-8.92L9.2 16.4c3.48 2.52 5.44 5.04 6.68 8.88h1.44c1.24-3.84 3.2-6.36 6.68-8.88z",fill:"#000"}})]))}}},283:function(t,e,n){"use strict";var r=n(266);n.n(r).a},284:function(t,e,n){(e=n(127)(!1)).push([t.i,".city-panel[data-v-716f456e]{z-index:var(--i)}",""]),t.exports=e},290:function(t,e,n){"use strict";n.r(e);n(82),n(25),n(26),n(36),n(50),n(27),n(12),n(24);var r=n(4),l=n(285),o=n(276),c=n(84),h=n(259),d=n(67),f=(n(261),n(28)),m=n.n(f),v=n(51),y=(n(125),{props:{title:{type:String,default:""}},computed:{splitTitle:function(){return this.title.split(" ").join("<br />")}},mounted:function(){}}),w=n(11),_=Object(w.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{ref:"title",staticClass:"city-title"},[e("span",{domProps:{innerHTML:this._s(this.splitTitle)}})])}),[],!1,null,null,null).exports,x=n(260),S=n(267),k=n(268),C={components:{Logo:m.a,CascadeLink:v.a,CityTitle:_,MakerCard:x.a,MakerIndexButton:S.a,MakerIndexCard:k.a},props:{city:{type:Object,default:function(){}},nextCity:{type:Object,default:function(){}},index:{type:Number,default:0},scroll:{type:String,default:""},active:{type:Boolean,default:!1},isAnimating:{type:Boolean,default:!1},stories:{type:Array,default:function(){return[]}},hasLoading:{type:Boolean,default:!1}},data:function(){return{containerWidth:0,innerWidth:0,startPos:0,animatedWrapper:0,animatedInner:0,titleWidth:0}},computed:{startPosition:function(){return this.startPos},animatedWrapperVal:function(){return this.animatedWrapper},animatedInnerVal:function(){return this.animatedInner},cssVars:function(){return{"--i":this.index+1}},thumbStyle:function(){var t=0;return this.scroll>this.startPosition&&(t=((this.scroll-this.startPosition)/(this.innerWidth-60-40*this.index-this.titleWidth)*100).toFixed(2)),{width:"".concat(t,"%")}},innerTranslateVal:function(){var t=null;return this.scroll>=this.startPosition+this.containerScrollWidth&&this.scroll<this.startPosition+this.innerWidth+this.containerScrollWidth-60?t=this.scroll-this.startPosition-this.containerScrollWidth:this.scroll>=this.startPosition+this.containerScrollWidth&&(t=this.innerWidth-60),t&&(t=Math.min(Math.max(t,0),this.innerWidth-60)),t},innerTranslate:function(){return this.innerTranslateVal?{transform:"translate3d(-".concat(this.innerTranslateVal,"px, 0, 0)")}:null},lockTitle:function(){if(this.titleWidth){if(this.isAnimating&&this.animatedInnerVal>this.innerWidth-60+20-this.titleWidth)return!0;if(this.innerTranslateVal>this.innerWidth-60+20-this.titleWidth)return!0}return!1},hideIndexButton:function(){return!!(this.titleWidth&&this.innerTranslateVal>this.innerWidth-60-this.containerScrollWidth-this.titleWidth)},wrapperTranslateVal:function(){return this.scroll>this.startPosition&&this.scroll<this.startPosition+this.containerScrollWidth?this.scroll-this.startPosition:this.scroll>=this.startPosition+this.containerScrollWidth?this.containerScrollWidth:0},wrapperTranslate:function(){return this.wrapperTranslateVal>0?{transform:"translate3d(-".concat(this.wrapperTranslateVal,"px, 0, 0)")}:null},peekStartTranslateVal:function(){var t=.128*window.innerHeight+29;return this.wrapperTranslateVal<t?(t*=-1,t+=this.wrapperTranslateVal):0},animPeekStartTranslateVal:function(){var t=.128*window.innerHeight+29;return this.animatedWrapperVal<t?(t*=-1,t+=this.animatedWrapperVal):0},peekEndTranslateVal:function(){var t=0;return this.innerTranslateVal>this.innerWidth-90-60&&(t=this.innerTranslateVal-(this.innerWidth-90-60)),t},animPeekEndTranslateVal:function(){var t=0;return this.animatedInnerVal>this.innerWidth-90-60&&(t=this.animatedInnerVal-(this.innerWidth-90-60)),t},peekStartTranslate:function(){return this.peekStartTranslateVal?{transform:"translate3d(".concat(this.peekStartTranslateVal,"px, 0, 0)")}:null},animPeekStartTranslate:function(){return this.animPeekStartTranslateVal?{transform:"translate3d(".concat(this.animPeekStartTranslateVal,"px, 0, 0)")}:null},peekEndTranslate:function(){return this.peekEndTranslateVal?{transform:"translate3d(".concat(this.peekEndTranslateVal,"px, 0, 0)")}:null},animPeekEndTranslate:function(){return this.animPeekEndTranslateVal?{transform:"translate3d(".concat(this.animPeekEndTranslateVal,"px, 0, 0)")}:null},containerScrollWidth:function(){return this.containerWidth-40},locked:function(){return this.wrapperTranslateVal===this.containerScrollWidth}},watch:{$route:{handler:function(){this.onRouteChange()}},active:{handler:function(){this.active&&this.$router.push("/#".concat(this.city.slug))}}},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},created:function(){},mounted:function(){this.handleResize(),window.addEventListener("resize",this.handleResize,{passive:!0}),this.onRouteChange()},methods:{onRouteChange:function(){var t=this.$route.hash;if(t){var e=this.city.slug;t!=="#".concat(e)||this.active||setTimeout(this.scrollToCity,this.hasLoading?c.a+c.b+10:10)}},goToEnd:function(){},goToStart:function(){},scrollToCity:function(){this.isAnimating||this.city.disabled||this.$emit("scrollCity",this.index,this.startPosition+this.containerScrollWidth)},scrollInnerPanel:function(t){this.$emit("scrollPanelOnTab",this.index,t)},handleResize:function(){this.containerWidth=this.$refs.panel.getBoundingClientRect().width,this.innerWidth=this.$refs.inner.getBoundingClientRect().width,this.$refs.title&&(this.titleWidth=this.$refs.title.$refs.title.getBoundingClientRect().width)}}},T=(n(279),Object(w.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"panel",class:["city-panel",t.active?"active":"inactive",{disabled:t.city.disabled},{locked:t.locked}],style:[t.cssVars,t.wrapperTranslate],attrs:{"data-city-panel":""}},[n("div",{class:["city-panel__header",t.lockTitle?"locked":""],attrs:{tabIndex:t.city.disabled?-1:0,role:"button"},on:{click:t.scrollToCity,keypress:t.scrollToCity}},[n("Logo"),t._v(" "),n("div",{staticClass:"city-panel__city"},[n("CascadeLink",{attrs:{title:t.city.name,disabled:t.city.disabled||t.active}})],1)],1),t._v(" "),n("section",{ref:"inner",staticClass:"panel-inner",style:t.innerTranslate},[n("div",{staticClass:"stories__cards"},[t._l(t.stories.slice(0,7),(function(e,r){return n("MakerCard",{key:e.attributes.title,attrs:{title:e.attributes.formatted_title?e.attributes.formatted_title:e.attributes.title,subtitle:e.attributes.subhead,image:e.attributes.main_image.url,"image-small":e.attributes.main_image.url_s,"maker-type":e.attributes.maker_type,slug:e.attributes.slug,"image-style":[t.isAnimating||0!==r?"":t.peekStartTranslate,t.isAnimating&&0===r?t.animPeekStartTranslate:""],"is-inactive":!t.active,"is-tabbable":!t.city.disabled,"is-next-up-card":!1},on:{tabfocused:t.scrollInnerPanel}})})),t._v(" "),t.city.disabled?t._e():n("MakerIndexCard",{attrs:{name:t.city.name,slug:t.city.slug}})],2),t._v(" "),t.nextCity&&!t.nextCity.disabled?n("CityTitle",{ref:"title",attrs:{title:t.nextCity.name}}):t._e()],1),t._v(" "),n("div",{staticClass:"city-panel__footer"},[n("div",{staticClass:"city-panel__number"},[n("span",[t._v("ยง")]),t._v("\n      0"+t._s(t.index+1)+"\n    ")])]),t._v(" "),t.city.disabled?t._e():n("MakerIndexButton",{class:[t.hideIndexButton?"is-hidden":""],attrs:{slug:t.city.slug}}),t._v(" "),n("div",{class:["city-panel__bar",!t.isAnimating&&t.active&&t.scroll>5?"is-visible":""]},[n("div",{staticClass:"city-panel__bar-thumb",style:t.thumbStyle})])],1)}),[],!1,null,"db8e6ae4",null).exports),M=n(281),W={components:{AtHome:n.n(M).a},props:{width:{type:Number,default:0}},computed:{style:function(){return this.width>=0?{width:"".concat(this.width,"px")}:null}},watch:{$route:{handler:function(){this.onRouteChange()}}},mounted:function(){h.a.splitText(this.$refs.subtitle,{words:0,spacing:"4px"})},methods:{onRouteChange:function(){this.$route.hash||this.$emit("scrollToStart")}}},V=Object(w.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"index",staticClass:"index",style:t.style,attrs:{"data-index":""}},[n("div",{staticClass:"index__inner"},[n("h1",{staticClass:"index__title"},[n("span",{staticClass:"visually-hidden"},[t._v("At Home")]),t._v(" "),n("AtHome")],1),t._v(" "),n("p",{ref:"subtitle",staticClass:"index__subtitle"},[t._v("How are "),n("span",[t._v("makers")]),n("br"),t._v("experiencing the"),n("br"),t._v("effects of the"),n("br"),n("span",[t._v("global pandemic?")])]),t._v(" "),n("p",{staticClass:"index__description"},[t._v("\n      In the wake of Covid-19, the world has changed in ways that no one could\n      have expected. From months spent in quarantine grew a global movement\n      for justice and equality. Each of us has processed and adapted to the\n      events of the last few months in our own way. In an effort to stay\n      connected and support one another through these unprecedented times, we\n      created At Home: a series of stories documenting the experience.\n    ")])])])}),[],!1,null,null,null).exports,$=n(282),P={components:{DownArrow:n.n($).a},props:{right:{type:Boolean,default:!1},width:{type:Number,default:0}},methods:{handleCtaClick:function(){this.$emit("scroll")}}},E=Object(w.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{class:["mobile-index"],attrs:{"data-index":""}},[this._m(0),this._v(" "),e("div",{staticClass:"mobile-index__cta",on:{click:this.handleCtaClick}},[e("span",[this._v("SCROLL")]),e("DownArrow"),e("span",[this._v("DOWN")])],1),this._v(" "),this._m(1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mobile-index__inner"},[n("h1",{staticClass:"mobile-index__title"},[t._v("\n      At "),n("br"),t._v("\n      Home\n    ")]),t._v(" "),n("p",{staticClass:"mobile-index__subtitle"},[t._v("\n      How are "),n("span",[t._v("makers")]),n("br"),t._v("experiencing the"),n("br"),t._v("effects of the"),n("br"),n("span",[t._v("global pandemic?")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mobile-index__description-wrapper"},[e("p",{staticClass:"mobile-index__description"},[this._v("\n      In the wake of Covid-19, the world has changed in ways that no one could\n      have expected. From months spent in quarantine grew a global movement\n      for justice and equality. Each of us has processed and adapted to the\n      events of the last few months in our own way. In an effort to stay\n      connected and support one another through these unprecedented times, we\n      created At Home: a series of stories documenting the experience.\n    ")])])}],!1,null,null,null).exports,A=n(108),L={components:{BackArrow:n.n(A).a,MakerCard:x.a},props:{city:{type:Object,default:function(){}},index:{type:Number,default:0},scroll:{type:String,default:""},active:{type:Boolean,default:!1},isAnimating:{type:Boolean,default:!1},firstStory:{type:Object,default:function(){}}},data:function(){return{isClicked:!1}},methods:{setIsClicked:function(){this.isClicked=!0}}},B=(n(283),{transition:{name:"default",duration:500,beforeLeave:function(t){var e=t.querySelector(".maker-card.is-clicked"),n=t.querySelector(".mobile-city-panel.is-clicked");if(e){var r=e.getBoundingClientRect(),l=(r.left+(window.innerWidth-r.right))/2-r.left+60;e.style.transform="translateX(".concat(l,"px)")}if(n){var o=48-n.getBoundingClientRect().top;n.style.transform="translateY(".concat(o,"px)")}},leave:function(t){var e=t.querySelector(".maker-card.is-clicked");if(e){var n=e.querySelector(".maker-card__image-wrapper-inner"),r=e.querySelector(".maker-card__image-wrapper"),l=n.getBoundingClientRect().top,o=window.innerHeight-n.getBoundingClientRect().bottom,h=window.innerWidth/2/n.clientWidth;n.style.transform="translateX(25vw) scale(".concat(h,")");var d=n.clientHeight/n.clientWidth;window.innerHeight/(window.innerWidth/2)>d&&(n.style.height="".concat(window.innerHeight*n.clientWidth/(window.innerWidth/2),"px")),r.style.transform="translateY(".concat((l-o)/-2,"px)");var f=function(t){var e=(window.innerWidth/2-t.clientWidth)/2+60-t.getBoundingClientRect().left;t.style.transform="translateX(".concat(e,"px)")};setTimeout((function(){f(e.querySelector(".maker-card__title")),f(e.querySelector(".maker-card__bottomContent"))}),c.c)}}},components:{CityPanel:T,Index:V,MobileIndex:E,MobileCityPanel:Object(w.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"panel",class:["mobile-city-panel",t.active?"active":"inactive",{disabled:t.city.disabled,"is-clicked":t.isClicked}],attrs:{"data-city-panel":""}},[n("nuxt-link",{attrs:{to:t.city.disabled?"/":"/city/"+t.city.slug},nativeOn:{click:function(e){return t.setIsClicked(e)}}},[n("div",{staticClass:"mobile-city-panel__header"},[n("BackArrow",{staticClass:"mobile-city-panel__back-arrow"}),t._v(" "),n("div",{staticClass:"mobile-city-panel__number"},[n("span",[t._v("ยง")]),t._v("\n        0"+t._s(t.index+1)+"\n      ")]),t._v(" "),n("div",{staticClass:"mobile-city-panel__city"},[t._v("\n        "+t._s(t.city.name)+"\n      ")])],1),t._v(" "),t.firstStory?n("MakerCard",{attrs:{title:t.firstStory.attributes.formatted_title?t.firstStory.attributes.formatted_title:t.firstStory.attributes.title,subtitle:t.firstStory.attributes.subhead,image:t.firstStory.attributes.main_image.url,"image-small":t.firstStory.attributes.main_image.url_s,"maker-type":t.firstStory.attributes.maker_type,slug:t.firstStory.attributes.slug,"is-mobile":!0,"force-show":!0,"is-inactive":!0}}):t._e()],1)],1)}),[],!1,null,"716f456e",null).exports},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var r,l,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,r=t.from,e.next=3,n(262);case 3:return l=e.sent,(c=l.keys().map((function(t){return l(t)}))).sort((function(a,b){return a.attributes.order-b.attributes.order})),h={},d.a.forEach((function(t){h[t.slug]=c.filter((function(e){return e.attributes.city===t.slug&&!e.attributes.hidden}))})),e.abrupt("return",{posts:h,data:o,from:r});case 9:case"end":return e.stop()}}),e)})))()},data:function(){return{indexWidth:null,scrollable:!1,targetScroll:"0",citiesList:d.a,activeCity:-1,cities:[],isAnimating:!1,isScrolling:!1,isMobile:!1,isDesktop:!1}},watch:{activeCity:{handler:function(){-1===this.activeCity&&this.$router.push("/")}}},beforeDestroy:function(){window.removeEventListener("wheel",this.handleScroll),window.removeEventListener("resize",this.handleResize),window.removeEventListener("keydown",this.onKeyDown),"ontouchstart"in window&&(window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove))},mounted:function(){var t=this;this.isMobile=window.innerWidth<=1024,this.isDesktop=!this.isMobile,this.$nextTick((function(){window.addEventListener("resize",t.handleResize,{passive:!0}),t.isDesktop&&t.initDesktop()})),this.from?this.scrollable=!0:setTimeout((function(){t.from=!0,t.scrollable=!0}),c.a+c.b)},methods:{initDesktop:function(){var t=this;this.currentScroll=0,this.scrollAmt=1.1,this.scrollLerpAmt=.9,this.scrollMultiplierFF=30,this.scrollMultiplierTouch=3.5,this.scrollMax=0,this.scrollMin=0,this.indexMax=0,this.indexMin=0,this.raf=null,this.setBounds(),window.addEventListener("wheel",this.handleScroll,{passive:!0}),"ontouchstart"in window&&(window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchmove",this.handleTouchMove)),window.addEventListener("keydown",this.onKeyDown),this.$refs.cities&&this.$refs.cities.forEach((function(e){t.cities.push(e)})),this.setCityBounds(),this.requestAnimationFrame()},scrollPanelOnTab:function(t,e){var n=this.indexMax-40,r=this.config.width;this.cities.forEach((function(e,i){i<t?n+=e.innerWidth+e.startPosition:i===t&&(r=e.innerWidth+e.startPosition-60-40)}));var l=n+e;l=Math.min(Math.max(l,n),r),this.currentScroll=l},scrollCities:function(t,e){var n=this;this.tl=l.a.timeline({onStart:this.scrollCitiesStart,onComplete:this.scrollCitiesComplete,onCompleteParams:[e],defaults:{duration:1.5,ease:"power4"}}),this.cities.forEach((function(e,i){i<=t?n.tl.fromTo(e.$refs.panel,{x:h.a.getTranslate3d(e.$refs.panel)[0]},{x:-e.containerScrollWidth},0):n.tl.fromTo(e.$refs.panel,{x:h.a.getTranslate3d(e.$refs.panel)[0]},{x:0},0),i<t?n.tl.fromTo(e.$refs.inner,{x:h.a.getTranslate3d(e.$refs.inner)[0]},{x:-(e.innerWidth-60)},0):n.tl.fromTo(e.$refs.inner,{x:h.a.getTranslate3d(e.$refs.inner)[0]},{x:0},0)}))},scrollCitiesStart:function(){var t=this;this.$nextTick((function(){t.isAnimating=!0}))},scrollCitiesComplete:function(t){var e=this;this.currentScroll=t,this.targetScroll=t.toFixed(2),this.$nextTick((function(){e.isAnimating=!1}))},handleResize:function(){var t=this;this.isMobile=window.innerWidth<=1024,this.isDesktop=!this.isMobile,this.$nextTick((function(){t.isDesktop&&(t.setCityBounds(),t.setBounds(),t.clampScroll())}))},handleScroll:function(t){if(this.scrollable){this.isScrolling=!0;var e=t.deltaY,n=t.deltaX;navigator.userAgent.includes("Firefox")&&1===t.deltaMode&&(e*=this.scrollMultiplierFF,n*=this.scrollMultiplierFF),this.currentScroll+=(e+n)*this.scrollAmt,this.clampScroll()}},handleTouchStart:function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStart=e.pageX},handleTouchMove:function(t){if(this.scrollable&&this.touchStart){this.isScrolling=!0;var e=t.targetTouches?t.targetTouches[0]:t,n=(this.touchStart-e.pageX)*this.scrollMultiplierTouch;this.currentScroll+=n,this.clampScroll(),this.touchStart=e.pageX}},onKeyDown:function(t){switch(t.keyCode){case 37:case 38:this.currentScroll-=75,this.clampScroll();break;case 39:case 40:this.currentScroll+=75,this.clampScroll()}},clampScroll:function(){this.currentScroll=Math.min(Math.max(this.currentScroll,this.scrollMin),this.scrollMax)},setBounds:function(){var t=this;this.config={width:window.innerWidth,height:window.innerHeight},this.scrollMax=0,this.$refs.cities&&(this.$refs.cities.filter((function(t){return!t.city.disabled})).forEach((function(e){t.isMobile?t.scrollMax+=e.$refs.inner.getBoundingClientRect().height:(t.scrollMax+=e.$refs.inner.getBoundingClientRect().width-60,t.scrollMax-=20)})),this.indexMax=this.config.width-40*this.$refs.cities.length-60,this.indexMin=0)},setCityBounds:function(){var t=this;this.cities.forEach((function(e,n){var r=n>0?t.cities[n-1].endPos-60:0,l=e.$refs.inner.getBoundingClientRect().width;t.cities[n].startPos=r,t.cities[n].endPos=r+l}))},scrollToStart:function(){this.indexWidth=this.indexMax,this.currentScroll=0},scrollMobile:function(){this.$refs.mobileContainer&&this.$refs.mobileContainer.scrollTo({top:window.innerHeight,behavior:"smooth"})},requestAnimationFrame:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){this.raf=requestAnimationFrame(this.animate)})),animate:function(){var t=this;if(!this.isAnimating){var e=(Math.floor(100*h.a.lerp(this.currentScroll,this.targetScroll,this.scrollLerpAmt))/100).toFixed(2);Math.abs(this.targetScroll-e)<2&&(this.isScrolling=!1),this.targetScroll=e}this.indexWidth=this.indexMax-Math.abs(this.targetScroll),this.indexWidth=Math.min(Math.max(this.indexWidth,this.indexMin),this.indexMax);var n=-1;this.cities.filter((function(t){return!t.disabled})).forEach((function(e,r){t.targetScroll>e.startPos&&t.targetScroll<e.endPos&&(n=r)})),this.activeCity=n,this.isAnimating&&this.cities.forEach((function(t){var e=parseFloat(h.a.getTranslate3d(t.$refs.panel)[0].toString().replace(/[^\d.]/g,"")),n=parseFloat(h.a.getTranslate3d(t.$refs.inner)[0].toString().replace(/[^\d.]/g,""));t.animatedWrapper=e,t.animatedInner=n})),this.requestAnimationFrame()}}}),I=Object(w.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["home"]},[t.isDesktop?n("div",{ref:"container",class:["container",{"is-scrolling":t.isScrolling}],attrs:{"data-container":""}},[n("Index",{ref:"index",attrs:{width:t.indexWidth},on:{scrollToStart:t.scrollToStart}}),t._v(" "),n("section",{staticClass:"cities"},t._l(t.citiesList,(function(e,r){return n("CityPanel",{key:r,ref:"cities",refInFor:!0,attrs:{city:e,index:r,scroll:t.targetScroll,active:r===t.activeCity,stories:t.posts[e.slug],"is-animating":t.isAnimating,"has-loading":!t.from,"next-city":r<t.citiesList.length-1?t.citiesList[r+1]:null},on:{scrollCity:t.scrollCities,scrollPanelOnTab:t.scrollPanelOnTab}})})),1)],1):t._e(),t._v(" "),t.isMobile?n("div",{ref:"mobileContainer",staticClass:"mobile-container"},[n("MobileIndex",{on:{scroll:t.scrollMobile}}),t._v(" "),n("section",{staticClass:"mobile-cities"},t._l(t.citiesList,(function(e,r){return n("MobileCityPanel",{key:r,attrs:{city:e,index:r,scroll:t.targetScroll,active:r===t.activeCity,"first-story":t.posts[e.slug]?t.posts[e.slug][0]:null,"is-animating":t.isAnimating},on:{scrollCity:t.scrollCities}})})),1)],1):t._e()])}),[],!1,null,null,null);e.default=I.exports}}]);